<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JY's Chat</title>
    <!-- CSS 文件按功能模块拆分 -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chat_css/chat_variables.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chat_css/chat_reset.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chat_css/chat_layout.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chat_css/chat_navbar.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chat_css/chat_section.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chat_css/chat_messages.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chat_css/chat_input.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chat_css/chat_animations.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chat_css/chat_scrollbar.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chat_css/chat_responsive.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chat_css/chat_command.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chat_css/chat_ai_info.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chat_css/chat_carousel.css') }}">
</head>

<body>
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="navbar-content">
            <div class="logo">
                <span>JY's Chat</span>
            </div>
            <ul class="nav-links" id="navLinks">
                <li><a href="/alert/">提醒</a></li>
                <li><a href="/feedback">反馈</a></li>
                <li><a href="/#chat">对话</a></li>
                <li><a id="authNavLink" href="/login">登录</a></li>
            </ul>
        </div>
    </nav>

    <main class="container">
        <!-- 聊天区域 -->
        <section class="chat-section" id="chatSection">
            <div class="chat-header">
                <div class="header-title-wrapper">
                    <h2>Peach & JY</h2>
                    <span class="agent-status" id="agentStatus">
                        <span class="status-dot"></span>
                        <span class="status-text">检查中...</span>
                    </span>
                </div>
                <div class="header-buttons">
                    <button class="mode-toggle-btn active" id="modeToggleBtn" onclick="toggleMode()">
                        <span id="modeText">标准版</span>
                    </button>
                    <button class="clear-btn" onclick="clearHistory()">Clear</button>
                </div>
            </div>
            <div class="chat-messages" id="chatMessages">
                <img src="{{ url_for('static', filename='imgs/deco/chat_index/chat_index_deco3.png') }}" alt="装饰"
                    class="chat-messages-deco">
                <div class="message assistant" id="initialMessage">
                    <div class="message-avatar" id="initialAvatar">AI</div>
                    <div class="message-content">
                        <div class="message-text">期待你的输入ing...</div>
                    </div>
                </div>
            </div>
            <div class="chat-input-area">
                <div id="imagePreview" class="image-preview" style="display: none;">
                    <img id="previewImg" src="" alt="预览">
                    <button class="remove-image-btn" onclick="removeImage()">×</button>
                </div>
                <div class="command-buttons">
                    <button class="command-btn-image" onclick="insertCommand('image')" title="图像生成">
                        图像生成(Beta)
                    </button>
                    <button class="command-btn-video" onclick="insertCommand('video')" title="视频生成">
                        视频生成(Beta)
                    </button>
                </div>
                <div class="input-container">
                    <div class="input-wrapper">
                        <textarea id="chatInput" class="chat-input" placeholder="点击输入" rows="1"
                            onkeydown="handleKeyDown(event)"></textarea>
                        <input type="file" id="imageUpload" accept="image/*" style="display: none;">
                        <button class="upload-btn" id="uploadBtn"
                            onclick="document.getElementById('imageUpload').click()" title="上传图片">
                            <img src="{{ url_for('static', filename='imgs/icon/upload.png') }}" alt="上传">
                        </button>
                        <button class="send-btn" id="sendBtn" onclick="sendMessage()" title="发送">
                            <img src="{{ url_for('static', filename='imgs/icon/发送.png') }}" alt="发送">
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- 右侧 Banner 区域 -->
        <aside class="right-sidebar">
            <div class="banner-container">
                <!-- 轮播图：如需添加更多图片，在data-images数组中添加路径，例如：
                     data-images='["{{ url_for('static', filename='imgs/index_banner/1.jpg') }}", "{{ url_for('static', filename='imgs/index_banner/2.jpg') }}"]'
                -->
                <div class="banner"
                    data-images='["{{ url_for("static", filename="imgs/index_banner/1.jpg") }}","{{ url_for("static", filename="imgs/index_banner/2.jpg") }}"]'
                    Banner</div>
                </div>
                <div class="banner-container">
                    <div class="banner-square">Banner</div>
                </div>
                <div class="banner-container">
                    <div class="banner-ad">
                        <img src="{{ url_for('static', filename='imgs/index_banner/advertise/1.gif') }}" alt="广告" class="banner-ad-image">
                    </div>
                </div>
        </aside>

    </main>

    <!-- 图片查看模态框 -->
    <div id="imageModal" class="image-modal" onclick="closeImageModal(event)">
        <div class="image-modal-content">
            <button class="image-modal-close" onclick="closeImageModal(event)">×</button>
            <img id="modalImage" src="" alt="图片详情">
        </div>
    </div>

    <!-- 视频查看模态框 -->
    <div id="videoModal" class="video-modal" onclick="closeVideoModal(event)">
        <div class="video-modal-content">
            <button class="video-modal-close" onclick="closeVideoModal(event)">×</button>
            <video id="modalVideo" src="" controls></video>
        </div>
    </div>

    <!-- AI信息模态框 -->
    <div id="aiInfoModal" class="ai-info-modal" onclick="closeAIInfoModal(event)">
        <div class="ai-info-modal-content" onclick="event.stopPropagation()">
            <button class="ai-info-modal-close" onclick="closeAIInfoModal(event)">×</button>
            <div class="ai-info-container">
                <div class="ai-info-left">
                    <div class="ai-info-avatar-wrapper">
                        <img id="aiInfoAvatar" src="" alt="AI头像" class="ai-info-avatar">
                    </div>
                    <h2 class="ai-info-name">Peach & JY</h2>
                    <p class="ai-info-description">DODOKOLU</p>
                    <div class="ai-info-stats">
                        <div class="ai-info-stat-item">
                            <span class="stat-label">版本</span>
                            <span class="stat-value">v1.0</span>
                        </div>
                        <div class="ai-info-stat-item">
                            <span class="stat-label">状态</span>
                            <span class="stat-value online">在线</span>
                        </div>
                    </div>
                </div>
                <div class="ai-info-right">
                    <div class="ai-info-custom-area">
                        <!-- 用户自定义内容区域 -->
                        <p class="custom-placeholder">此区域待用户定义</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 用户信息模态框 -->
    <div id="userInfoModal" class="ai-info-modal" onclick="closeUserInfoModal(event)">
        <div class="ai-info-modal-content" onclick="event.stopPropagation()">
            <button class="ai-info-modal-close" onclick="closeUserInfoModal(event)">×</button>
            <div class="ai-info-container">
                <div class="ai-info-left">
                    <div class="ai-info-avatar-wrapper" style="cursor: pointer;"
                        onclick="document.getElementById(' avatarUploadInput').click()" title="点击上传头像">
                        <img id="userInfoAvatar" src="" alt="用户头像" class="ai-info-avatar" style="display: none;">
                        <div id="userInfoAvatarPlaceholder" class="ai-info-avatar"
                            style="display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #64748b, #94a3b8); color: white; font-size: 2.5rem; font-weight: 600;">
                            我</div>
                    </div>
                    <input type="file" id="avatarUploadInput" accept="image/png,image/jpeg,image/jpg"
                        style="display: none;" onchange="handleAvatarUpload(event)">
                    <h2 class="ai-info-name" id="userInfoName">用户</h2>
                    <p class="ai-info-description" id="userInfoEmail">未登录</p>
                    <div class="ai-info-stats">
                        <div class="ai-info-stat-item">
                            <span class="stat-label">用户ID</span>
                            <span class="stat-value" id="userInfoId">-</span>
                        </div>
                        <div class="ai-info-stat-item">
                            <span class="stat-label">注册时间</span>
                            <span class="stat-value" id="userInfoCreatedAt">-</span>
                        </div>
                    </div>
                </div>
                <div class="ai-info-right">
                    <div class="ai-info-custom-area">
                        <!-- 用户自定义内容区域 -->
                        <p class="custom-placeholder">此区域待用户定义</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 音频生成中模态框 -->
    <div id="audioGeneratingModal" class="audio-generating-modal">
        <div class="audio-generating-content">
            <img src="{{ url_for('static', filename='imgs/deco/chat_index/sound_error.png') }}" alt="正在生成"
                class="audio-generating-image">
            <p class="audio-generating-text">正在生成...</p>
        </div>
    </div>

    <!-- JavaScript 文件按功能模块拆分 -->
    <script src="{{ url_for('static', filename='js/chat_js/chat_variables.js') }}"></script>
    <script src="{{ url_for('static', filename='js/chat_js/chat_location.js') }}"></script>
    <script src="{{ url_for('static', filename='js/chat_js/chat_messages.js') }}"></script>
    <script src="{{ url_for('static', filename='js/chat_js/chat_section.js') }}"></script>
    <script src="{{ url_for('static', filename='js/chat_js/chat_input.js') }}"></script>
    <script src="{{ url_for('static', filename='js/chat_js/chat_command.js') }}"></script>
    <script src="{{ url_for('static', filename='js/chat_js/chat_navbar.js') }}"></script>
    <script src="{{ url_for('static', filename='js/chat_js/chat_carousel.js') }}"></script>
    <script src="{{ url_for('static', filename='js/chat_js/chat_init.js') }}"></script>
</body>

</html>